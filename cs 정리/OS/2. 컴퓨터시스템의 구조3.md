# 컴퓨터시스템의 구조

> 인터럽트가 운영체제를 구동시키는 원리와 인터럽트의 한 종류인 시스템콜에 대해 알아본다. 동기식/비동기식 입출력에서의 인터럽트, DMA를 이용한 인터럽트 조절에 대해 알아본다. 계층구조에 의해 I/O에서 입출력명령어가 다름을 이해한다.

## 

# 1. 인터럽트

- 인터럽트 당한 시점의 레지스터와 program counter를 save 한 후 CPU의 제어를 인터럽트 처리 루틴에 넘긴다
- 넓은 의미
  - Interrupt (하드웨어 인터럽트) : 하드웨어가 발생시킨 인터럽트
  - Trap (소프트웨어 인터럽트)
    - Exception : 프로그램이 오류를 범한 경우
    - System call : 프로그램이 커널 함수를 호출하는 경우
  - 인터럽트 벡터 : 해당 인터럽트의 처리 루틴 주소를 가지고 있음
  - 인터럽트 처리 루틴(=Interrupt Service Routine, 인터럽트 핸들러) : 해당 인터럽트를 처리하는 커널 함수
  - 시스템 콜 : 사용자 프로그램이 운영체제의 서비스를 받기 위해 커널 함수를 호출하는 것(인터럽트를 검) - 소프트웨어 인터럽트

- 디바이스 컨트롤러 : 모든 I/O에서 I/O장치를 전담하는 작은 CPU -> 하드웨어

- 1) 시간이 다 되서 CPU 뺏김 2. I/O장치 기다리는게 오래 걸려서 넘김

     

# 동기식 입출력과 비동기식 입출력

- 두 경우 모두 I/O의 완료는 인터럽트로 알려줌

- 동기식 입출력(synchronous I/O)
  - I/O 요청 후 입출력 작업이 완료된 후에야 제어가 사용자 프로그램에 넘어감
  - 구현 방법 1 -> I/O도 낭비
    - I/O가 끝날 때까지 CPU를 낭비시킴
    - 매시점 하나의 I/O만 일어날 수 있음
  - 구현 방법 2 -> 효율적
    - I/O가 완료될 때까지 해당 프로그램에게서 CPU를 뺴앗음
    - I/O 처리를 기다리는 줄에 그 프로그램을 줄 세움
    - 다른 프로그램에게 CPU를 줌
- 비동기식 입출력(asynchronous I/O)
  - I/O가 시작된 후 입출력 작업이 끝나기를 기다리지 않고 제어가 사용자 프로그램에 즉시 넘어감(I/O 사용 정보랑 무관한 작업을 바로 진행)



## DMA(Direct Memory Access)

- 빠른 입출력 장치를 메모리에 가까운 속도로 처리하기 위해 사용
- CPU의 중재 없이 device contrioller가 device의 buffer storage의 내용을 **메모리에 block 단위로 직접 전송**
- 바이트 단위가 아니라 block 단위로 인터럽트를 발생시킴 -> 효율적



## 서로 다른 입출력 기계어

- I/O를 수행하는 special instruction에 의해
- Memory Mapped I/O에 의해 메모리 명령어로 I/O까지 한번에

